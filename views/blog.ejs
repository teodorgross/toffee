<% 
const currentPage = 'blog';
const title = 'Blog';
%>

<section class="content-section">
    <h1 class="section-title">Blog Posts</h1>
    

    
    <% if (posts && posts.length > 0) { %>
        <% posts.forEach((post, index) => { %>
            <article class="service-card" style="margin-bottom: 30px;">
                <div class="d-flex justify-content-between align-items-start mb-3">
                    <h2 style="color: var(--terminal-green); margin: 0; font-size: 1.3rem;">
                        <a href="/blog/<%= post.slug %>" style="color: inherit; text-decoration: none;">
                            <%= post.title %>
                        </a>
                    </h2>
                    <div style="font-size: 0.8rem; color: var(--terminal-gray);">
                        <%= moment(post.date).format('MMM DD, YYYY') %>
                    </div>
                </div>
                
                <div style="color: var(--terminal-gray); font-size: 0.9rem; margin-bottom: 15px;">
                    By <%= post.author %> 
                    <% if (post.tags && post.tags.length > 0) { %>
                        â€¢ Tags: 
                        <% post.tags.forEach((tag, i) => { %>
                            <span style="color: var(--terminal-cyan);">#<%= tag %></span><%= i < post.tags.length - 1 ? ', ' : '' %>
                        <% }) %>
                    <% } %>
                </div>
                
                <div style="color: var(--terminal-white); line-height: 1.6; margin-bottom: 20px;">
                    <%= post.excerpt %>
                </div>
                
                <a href="/blog/<%= post.slug %>" class="btn-terminal btn-sm">
                    Read More <i class="fas fa-arrow-right ms-2"></i>
                </a>
            </article>
        <% }) %>
        
        <!-- Pagination -->
        <% if (totalPages > 1) { %>
            <nav class="d-flex justify-content-center mt-4">
                <div class="d-flex gap-2">
                    <% if (hasPrev) { %>
                        <a href="/blog?page=<%= currentPage - 1 %>" class="btn-terminal btn-sm">
                            <i class="fas fa-chevron-left"></i> Prev
                        </a>
                    <% } %>
                    
                    <% for (let i = 1; i <= totalPages; i++) { %>
                        <% if (i === currentPage) { %>
                            <span class="btn-terminal btn-sm" style="background: var(--terminal-green); color: var(--terminal-bg);">
                                <%= i %>
                            </span>
                        <% } else { %>
                            <a href="/blog?page=<%= i %>" class="btn-terminal btn-sm">
                                <%= i %>
                            </a>
                        <% } %>
                    <% } %>
                    
                    <% if (hasNext) { %>
                        <a href="/blog?page=<%= currentPage + 1 %>" class="btn-terminal btn-sm">
                            Next <i class="fas fa-chevron-right"></i>
                        </a>
                    <% } %>
                </div>
            </nav>
        <% } %>
        
    <% } else { %>
        <div style="color: var(--terminal-gray); font-style: italic; text-align: center; padding: 40px;">
            <i class="fas fa-file-alt" style="font-size: 3rem; margin-bottom: 20px; opacity: 0.5;"></i>
            <div style="font-size: 1.1rem; margin-bottom: 10px;">No blog posts found</div>
            <div style="font-size: 0.9rem;">
                Add .md files to the <code>posts/</code> directory to create blog posts.
            </div>
        </div>
    <% } %>
</section>
